parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"EpR5":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return n(t,r(t,e,"get"))}function n(t,e){return e.get?e.get.call(t):e.value}function o(t,e,n){return i(t,r(t,e,"set"),n),n}function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function i(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=p();return function(){var n,o=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return u(this,n)}}function u(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?l(e):n}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(){function t(e,n,o){f(this,t),v(this,"date",new Date),v(this,"id",(Date.now()+"").slice(-10)),v(this,"clicks",0),this.coords=e,this.distance=n,this.duration=o}return _(t,[{key:"_setDescription",value:function(){this.description="".concat(this.type[0].toUpperCase()).concat(this.type.slice(1)," on ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.date.getMonth()]," ").concat(this.date.getDate())}},{key:"click",value:function(){this.clicks++}}]),t}(),k=function(t){a(n,y);var e=c(n);function n(t,o,r,i){var a;return f(this,n),v(l(a=e.call(this,t,o,r)),"type","running"),a.cadence=i,a.calcPace(),a._setDescription(),a}return _(n,[{key:"calcPace",value:function(){return this.pace=this.duration/this.distance,this.pace}}]),n}(),w=function(t){a(n,y);var e=c(n);function n(t,o,r,i){var a;return f(this,n),v(l(a=e.call(this,t,o,r)),"type","cycling"),a.elevationGain=i,a.calcSpeed(),a._setDescription(),a}return _(n,[{key:"calcSpeed",value:function(){return this.speed=this.distance/(this.duration/60),this.speed}}]),n}(),m=document.querySelector(".form"),g=document.querySelector(".workouts"),b=document.querySelector(".form__input--type"),S=document.querySelector(".form__input--distance"),O=document.querySelector(".form__input--duration"),P=document.querySelector(".form__input--cadence"),M=document.querySelector(".form__input--elevation"),W=document.querySelector(".logo"),E=new WeakMap,F=new WeakMap,T=new WeakMap,j=new WeakMap,q=function(){function t(){f(this,t),E.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:13}),T.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:[]}),this._getPosition(),this._getLocalStorage(),m.addEventListener("submit",this._newWorkout.bind(this)),b.addEventListener("change",this._toggleElevationField),g.addEventListener("click",this._moveToPopup.bind(this)),W.addEventListener("click",this.reset.bind(this))}return _(t,[{key:"_getPosition",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this._loadMap.bind(this),function(){alert("Could not get your position")})}},{key:"_loadMap",value:function(t){var n=this,r=[t.coords.latitude,t.coords.longitude];o(this,E,L.map("map").setView(r,e(this,F))),L.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e(this,E)),e(this,E).on("click",this._showForm.bind(this)),e(this,j).forEach(function(t){n._renderWorkoutMarker(t)})}},{key:"_showForm",value:function(t){o(this,T,t),m.classList.remove("hidden"),S.focus()}},{key:"_hideForm",value:function(){S.value=O.value=P.value=M.value="",m.style.display="none",m.classList.add("hidden"),setTimeout(function(){return m.style.display="grid"},1e3)}},{key:"_toggleElevationField",value:function(){M.closest(".form__row").classList.toggle("form__row--hidden"),P.closest(".form__row").classList.toggle("form__row--hidden")}},{key:"_newWorkout",value:function(t){var n=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every(function(t){return Number.isFinite(t)})},o=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every(function(t){return t>0})};t.preventDefault();var r,i=b.value,a=+S.value,s=+O.value,c=e(this,T).latlng,u=c.lat,l=c.lng;if("running"===i){var p=+P.value;if(!n(a,s,p)||!o(a,s,p))return alert("Inputs have to be positive numbers!");r=new k([u,l],a,s,p)}if("cycling"===i){var d=+M.value;if(!n(a,s,d)||!o(a,s))return alert("Inputs have to be positive numbers!");r=new w([u,l],a,s,d)}e(this,j).push(r),this._renderWorkoutMarker(r),this._renderWorkout(r),this._hideForm(),this._setLocalStorage()}},{key:"_renderWorkoutMarker",value:function(t){L.marker(t.coords).addTo(e(this,E)).bindPopup(L.popup({maxWidth:250,minWidth:100,autoClose:!1,closeOnClick:!1,className:"".concat(t.type,"-popup")})).setPopupContent("".concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è"," ").concat(t.description)).openPopup()}},{key:"_renderWorkout",value:function(t){var e='\n      <li class="workout workout--'.concat(t.type,'" data-id="').concat(t.id,'">\n        <h2 class="workout__title">').concat(t.description,'</h2>\n        <div class="workout__details">\n          <span class="workout__icon">').concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è",'</span>\n          <span class="workout__value">').concat(t.distance,'</span>\n          <span class="workout__unit">km</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">‚è±</span>\n          <span class="workout__value">').concat(t.duration,'</span>\n          <span class="workout__unit">min</span>\n        </div>\n    ');"running"===t.type&&(e+='\n        <div class="workout__details">\n          <span class="workout__icon">‚ö°Ô∏è</span>\n          <span class="workout__value">'.concat(t.pace.toFixed(1),'</span>\n          <span class="workout__unit">min/km</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">ü¶∂üèº</span>\n          <span class="workout__value">').concat(t.cadence,'</span>\n          <span class="workout__unit">spm</span>\n        </div>\n      </li>\n      ')),"cycling"===t.type&&(e+='\n        <div class="workout__details">\n          <span class="workout__icon">‚ö°Ô∏è</span>\n          <span class="workout__value">'.concat(t.speed.toFixed(1),'</span>\n          <span class="workout__unit">km/h</span>\n        </div>\n        <div class="workout__details">\n          <span class="workout__icon">‚õ∞</span>\n          <span class="workout__value">').concat(t.elevationGain,'</span>\n          <span class="workout__unit">m</span>\n        </div>\n      </li>\n      ')),m.insertAdjacentHTML("afterend",e)}},{key:"_moveToPopup",value:function(t){if(e(this,E)){var n=t.target.closest(".workout");if(n){var o=e(this,j).find(function(t){return t.id===n.dataset.id});e(this,E).setView(o.coords,e(this,F),{animate:!0,pan:{duration:1}})}}}},{key:"_setLocalStorage",value:function(){localStorage.setItem("workouts",JSON.stringify(e(this,j)))}},{key:"_getLocalStorage",value:function(){var t=this,n=JSON.parse(localStorage.getItem("workouts"));n&&(o(this,j,n),e(this,j).forEach(function(e){t._renderWorkout(e)}))}},{key:"reset",value:function(){localStorage.removeItem("workouts"),location.reload()}}]),t}(),D=new q;
},{}]},{},["EpR5"], null)
//# sourceMappingURL=/script.f8efd12e.js.map